<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Booha Study Decks – January Week 1</title>
<meta name="theme-color" content="#000000">
<link rel="icon" type="image/png" href="booha-ghost.png">
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&display=swap" rel="stylesheet" />
<style>
:root{
  --radius:28px;
  --pink:#ff7eb9;
  --blue:#5ee6ff;
  --yellow:#fff680;
  --purple:#c77dff;
  --ink:#fff;
}

/* Reset */
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;
  font-family:'Cinzel',serif;
  background:#000;
  color:var(--ink);
  overflow:auto;
  -webkit-overflow-scrolling:touch;
}

/* Layout */
#welcome{
  min-height:100svh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:28px 18px 18px;
  gap:18px;
  animation:fadeIn 1.2s ease-in;
}

/* Headings */
h1{font-size:clamp(32px,5vw,60px);letter-spacing:1px;font-weight:900;}
h2{font-size:clamp(22px,3vw,36px);font-weight:800;color:#ccc;}
h3{font-size:clamp(18px,2.5vw,28px);color:#aaa;margin-top:6px;}

/* Tiles */
.deck-links{
  display:flex;
  gap:1.2rem;
  flex-wrap:wrap;
  justify-content:center;
  padding:10px 0 6px;
}

a.deck{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  width:160px;height:160px;
  border-radius:20px;
  text-decoration:none;
  color:#111;
  font-weight:900;
  font-size:1.2rem;
  box-shadow:0 0 25px rgba(255,255,255,.15);
  transition:transform .18s ease, box-shadow .25s ease, filter .25s ease;
  animation:stripes 10s linear infinite;
  background-size:300% 300%;
  position:relative;
  overflow:hidden;
  -webkit-tap-highlight-color:transparent;
  user-select:none;
  touch-action:manipulation;
}

/* Base gradients */
a.deck:nth-child(1){background:linear-gradient(145deg,var(--pink),#ffc0cb,var(--purple));}
a.deck:nth-child(2){background:linear-gradient(145deg,var(--blue),#c0ffff,var(--purple));}
a.deck:nth-child(3){background:linear-gradient(145deg,var(--yellow),#fff7b2,var(--pink));}

/* Hover */
a.deck:nth-child(1):hover{transform:scale(1.05);box-shadow:0 0 30px var(--pink),0 0 60px rgba(255,126,185,.5);filter:brightness(1.15);}
a.deck:nth-child(2):hover{transform:scale(1.05);box-shadow:0 0 30px var(--blue),0 0 60px rgba(94,230,255,.5);filter:brightness(1.15);}
a.deck:nth-child(3):hover{transform:scale(1.05);box-shadow:0 0 30px var(--yellow),0 0 60px rgba(255,246,128,.5);filter:brightness(1.15);}

/* Stripe motion */
@keyframes stripes{0%{background-position:0 0;}100%{background-position:300% 300%;}}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}

/* Footer */
footer{
  margin-top:10px;
  padding:8px 0 18px;
  width:100%;
  text-align:center;
  font-size:clamp(14px,2vw,18px);
  color:#888;
  letter-spacing:1px;
  opacity:.9;
}

/* =========================
   Click FX: 5-second shimmer
   ========================= */

/* quick “press” */
a.deck.tap{transform:scale(.96);}

/* 5-second glow ring */
a.deck.playing{
  filter:brightness(1.18) saturate(1.2);
  transform:scale(1.03);
}

/* color-specific glow */
a.deck.playing.fx-pink{ box-shadow:0 0 18px rgba(255,126,185,.9), 0 0 60px rgba(255,126,185,.55), 0 0 120px rgba(255,126,185,.25); }
a.deck.playing.fx-blue{ box-shadow:0 0 18px rgba(94,230,255,.9), 0 0 60px rgba(94,230,255,.55), 0 0 120px rgba(94,230,255,.25); }
a.deck.playing.fx-yellow{ box-shadow:0 0 18px rgba(255,246,128,.95), 0 0 60px rgba(255,246,128,.55), 0 0 120px rgba(255,246,128,.25); }

/* animated shimmer overlay (runs while “playing”) */
a.deck.playing::after{
  content:"";
  position:absolute;
  inset:-30%;
  background:
    radial-gradient(circle at 25% 20%, rgba(255,255,255,.75), transparent 55%),
    radial-gradient(circle at 80% 85%, rgba(255,255,255,.45), transparent 62%),
    conic-gradient(from 0deg, rgba(255,255,255,.0), rgba(255,255,255,.35), rgba(255,255,255,.0));
  mix-blend-mode:screen;
  opacity:.75;
  animation: shimmer5 1s linear infinite;
  pointer-events:none;
}

@keyframes shimmer5{
  0%{transform:translateY(10px) rotate(0deg);}
  100%{transform:translateY(-10px) rotate(18deg);}
}
</style>
</head>
<body>

<!-- ✅ Put studydeck.mp3 in the SAME folder as this index.html -->
<audio id="clickBgm" preload="auto">
  <source src="studydeck.mp3" type="audio/mpeg">
</audio>

<section id="welcome">
  <h1>Booha Study Decks</h1>
  <h2>ブーハー・スタディデッキ</h2>
  <h3>January Week 1 Card Decks<br>１月第１週カードデッキ</h3>

  <div class="deck-links">
  <a class="deck" data-fx="fx-pink" href="vocab.html">
    Vocabulary<br><span style="font-size:0.8em;">語彙</span>
  </a>
  <a class="deck" data-fx="fx-blue" href="sentences.html">
    Sentences<br><span style="font-size:0.8em;">文</span>
  </a>
  <a class="deck" data-fx="fx-yellow" href="questions.html">
    Questions<br><span style="font-size:0.8em;">質問</span>
  </a>
</div>


 <footer>Bryan’s English School</footer>
</section>

<script>
const clickBgm = document.getElementById('clickBgm');

/* Safety: stop + reset */
function stopClickBgm(){
  try{ clickBgm.pause(); }catch{}
  try{ clickBgm.currentTime = 0; }catch{}
}

/* Play then navigate (keeps iOS happy: runs directly on click) */
async function playThenGo(anchor){
  const url = anchor.getAttribute('href');

  // visual press + shimmer
  anchor.classList.add('tap');
  setTimeout(()=>anchor.classList.remove('tap'), 180);

  // prevent double clicks
  if(anchor.classList.contains('playing')) return;

  // stop any previous play + clear other tiles
  document.querySelectorAll('a.deck.playing').forEach(el=>{
    el.classList.remove('playing','fx-pink','fx-blue','fx-yellow');
  });
  stopClickBgm();

  // apply color FX
  const fx = anchor.dataset.fx || '';
  anchor.classList.add('playing');
  if(fx) anchor.classList.add(fx);

  // play sound
  let ended = false;
  const go = ()=>{
    if(ended) return;
    ended = true;
    window.location.href = url;
  };

  // If audio ends normally, navigate then
  clickBgm.onended = go;

  // Backup: if audio fails/blocked, still navigate quickly
  const fallback = setTimeout(go, 650);

  try{
    clickBgm.volume = 0.9;
    clickBgm.currentTime = 0;
    await clickBgm.play();

    // audio started: cancel quick fallback, and instead wait ~5s max
    clearTimeout(fallback);
    setTimeout(go, 5200);
  }catch(e){
    // if blocked, just go
    go();
  }
}

/* Bind clicks */
document.querySelectorAll('a.deck').forEach(a=>{
  a.addEventListener('click', (e)=>{
    e.preventDefault();
    playThenGo(a);
  });
});
</script>

</body>
</html>
